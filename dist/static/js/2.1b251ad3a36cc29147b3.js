webpackJsonp([2],{102:function(t,e,i){function a(t){i(136)}var n=i(7)(i(118),i(151),a,"data-v-1bec545b",null);t.exports=n.exports},118:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{content:"",maxContent:"200",maxSize:8e3,maxHeight:"100",imgUrl:"",finished:!0,compress:!1,imgList:[],showAdd:!0}},methods:{chooseImage:function(t){console.log(2);var e=this;if(t.target.files[0]){var i=t.target.files[0];if(!/\/(?:jpeg|png)/i.test(i.type))return;if(0===i.type.indexOf("image")){var a=new FileReader;a.readAsDataURL(i),console.log("1"),a.onload=function(a){var n=a.target.result;if(n.length<=e.maxSize){var o=e.getImageUrl(i);e.imgUrl=o,e.imgList.push({imgUrl:o}),e.finished=!1,t.target.value=""}else e.compressImg(n,e.maxHeight,function(a){e.compress=!0,e.imgUrl=a,e.imgList.push({imgUrl:a}),e.finished=!1,e.uploadImg(i),t.target.value=""})}}}},getImageUrl:function(t){var e=null;return void 0!==window.createObjectURL?e=window.createObjectURL(t):void 0!==window.URL?e=window.URL.createObjectURL(t):void 0!==window.webkitURL&&(e=window.webkitURL.createObjectURL(t)),e},compressImg:function(t,e,i){if(t){i=i||function(){},e=e||800;var a=new Image;a.src=t,a.onload=function(){a.height>e&&(a.width*=e/a.height,a.height=e);var t=document.getElementById("myCanvas"),n=t.getContext("2d");n.clearRect(0,0,t.width,t.height),t.width=a.width,t.height=a.height,n.drawImage(a,0,0,a.width,a.height),i(t.toDataURL("image/jpeg"))}}},uploadImg:function(t){(new FormData).append("files",t)}},computed:{watchTxt:function(){return this.content.length+"/"+this.maxContent},ImgList:function(){return console.log(this.imgList),this.imgList},isShowAdd:function(){return!(this.ImgList.length>=3)}}}},123:function(t,e,i){e=t.exports=i(89)(!1),e.push([t.i,".upload-txt[data-v-1bec545b]{margin-bottom:.1rem}.add[data-v-1bec545b]{width:.5rem;height:.5rem;float:left;position:relative}.add .uploadImg[data-v-1bec545b]{display:block;opacity:0;z-index:100}.add .uploadImg[data-v-1bec545b],.add div[data-v-1bec545b]{width:.5rem;height:.5rem;border:1px solid #ddd;position:absolute}.add div[data-v-1bec545b]{font-size:.36rem;line-height:.5rem}.show-img[data-v-1bec545b]{float:left;width:.5rem;height:.5rem;margin-left:.1rem}.show-img img[data-v-1bec545b]{width:.5rem;height:.5rem}",""])},136:function(t,e,i){var a=i(123);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i(90)("225346ff",a,!0)},151:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("v-header",{attrs:{title:"suggest",prev:"true"}}),t._v(" "),i("form",[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],attrs:{maxlength:"10",cols:"30",rows:"10",placeholder:"请简要描述您遇到的问题或者建议"},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}}),t._v(" "),i("p",[t._v(t._s(t.watchTxt))])]),t._v(" "),i("p",{staticClass:"upload-txt font-16"},[t._v("上传图片")]),t._v(" "),i("form",{staticClass:"upload-img",attrs:{action:""}},[t._l(t.ImgList,function(e,a){return t.ImgList.length>0?i("div",{key:a,staticClass:"show-img"},[i("img",{attrs:{src:e.imgUrl,alt:""}})]):t._e()}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowAdd,expression:"isShowAdd"}],staticClass:"add"},[i("input",{staticClass:"uploadImg",attrs:{type:"file",accept:"image/*",name:"file"},on:{change:function(e){t.chooseImage(e)}}}),t._v(" "),i("div",{staticClass:"txt-center"},[t._v("+")])])],2),t._v(" "),i("canvas",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{id:"myCanvas"}})],1)},staticRenderFns:[]}}});